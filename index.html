<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>F4TA Morgana AI Lab</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <!-- Прогресс-бар этапов -->
        <div class="progress-bar" id="progressBar">
            <div class="step-indicator">
                <div class="step-circle active" data-step="1">1</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="2">2</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="3">3</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="4">4</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="5">5</div>
            </div>
        </div>

        <div class="container">
            <!-- Этап 1: Загрузка -->
            <div class="stage active" id="stage1">
                <div class="hero">
                    <h1 data-text="F4TA-Morgana AI Lab">F4TA-Morgana</h1>
                    <p class="subtitle">
                        Laboratorium experimentorum neuralium
                    </p>

                    <!-- Замените текущий upload-area на этот код -->
                    <div class="upload-area" id="upload-area">
                        <input
                            type="file"
                            id="fileInput"
                            accept="image/*,video/*"
                            hidden
                        />
                        <label for="fileInput" class="upload-label">
                            <div class="reactor-container">
                                <!-- Био-реактор -->
                                <div class="bio-reactor">
                                    <div class="reactor-core"></div>
                                    <div class="reactor-waves">
                                        <div class="wave-circle"></div>
                                        <div class="wave-circle"></div>
                                        <div class="wave-circle"></div>
                                    </div>
                                    <div class="data-particles">
                                        <div
                                            class="particle"
                                            style="
                                                --delay: 0s;
                                                --size: 2px;
                                                --color: #00f5ff;
                                            "
                                        ></div>
                                        <div
                                            class="particle"
                                            style="
                                                --delay: 0.5s;
                                                --size: 3px;
                                                --color: #00dc82;
                                            "
                                        ></div>
                                        <div
                                            class="particle"
                                            style="
                                                --delay: 1s;
                                                --size: 2px;
                                                --color: #9d4edd;
                                            "
                                        ></div>
                                        <div
                                            class="particle"
                                            style="
                                                --delay: 1.5s;
                                                --size: 3px;
                                                --color: #00f5ff;
                                            "
                                        ></div>
                                    </div>
                                </div>

                                <!-- Иконка загрузки с анимацией -->
                                <div class="upload-icon">
                                    <svg class="upload-svg" viewBox="0 0 24 24">
                                        <path
                                            class="upload-arrow"
                                            d="M9 16h6v-6h4l-7-7-7 7h4z"
                                        />
                                        <path
                                            class="upload-cloud"
                                            d="M17.5 19H6.5a3 3 0 0 1-3-3 3 3 0 0 1 .879-2.121l.716-.717h13.006l.717.717A3 3 0 0 1 20.5 16a3 3 0 0 1-3 3z"
                                        />
                                    </svg>
                                </div>
                            </div>

                            <div class="upload-text">
                                <svg
                                    fill="#000000"
                                    version="1.1"
                                    id="Layer_1"
                                    xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink"
                                    width="300px"
                                    height="300px"
                                    viewBox="0 0 37.5 37.5"
                                    enable-background="new 0 0 100 100"
                                    xml:space="preserve"
                                >
                                    <g>
                                        <path
                                            d="M11.35 33.144c-1.022 0 -2.338 -0.346 -3.652 -1.66 -1.733 -1.733 -1.951 -3.405 -1.829 -4.505 0.143 -1.288 0.802 -2.53 1.959 -3.687L18.858 12.263c3.081 -3.079 5.13 -1.953 6.077 -1.006 1.146 1.146 1.897 3.127 -1.03 6.054L13.75 27.464l-1.977 -1.977 10.154 -10.154c1.564 -1.565 1.204 -1.926 1.029 -2.1 -0.138 -0.138 -0.559 -0.557 -2.123 1.006L9.805 25.269c-0.48 0.48 -1.069 1.22 -1.158 2.02 -0.08 0.721 0.256 1.447 1.029 2.219 0.958 0.959 1.683 0.857 1.922 0.823 0.652 -0.091 1.397 -0.541 2.152 -1.296 0.936 -0.933 12.223 -12.222 13.088 -13.088 1.068 -1.068 1.748 -2.107 2.019 -3.089 0.393 -1.42 -0.077 -2.77 -1.436 -4.13 -1.434 -1.434 -3.745 -2.936 -7.24 0.561L8.1 21.368a1.397 1.397 0 0 1 -1.977 0 1.397 1.397 0 0 1 0 -1.977l12.08 -12.08c3.734 -3.735 7.813 -3.94 11.193 -0.561 2.621 2.621 2.618 5.171 2.155 6.851 -0.408 1.474 -1.302 2.886 -2.736 4.321 -0.865 0.866 -12.155 12.156 -13.089 13.088 -1.203 1.205 -2.462 1.907 -3.738 2.088a4.5 4.5 0 0 1 -0.639 0.045"
                                        />
                                    </g>
                                </svg>
                                <span
                                    class="glitch-text"
                                    data-text="ЗАГРУЗИТЕ ФАЙЛ"
                                    >Загрузите изображение
                                </span>

                                <p class="upload-description">
                                    Перетащите файл или кликните для выбора
                                </p>
                            </div>

                            <div class="file-types">
                                <span class="type-badge">JPG</span>
                                <span class="type-badge">PNG</span>
                                <span class="type-badge">GIF</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Этап 2: Выбор инструмента -->
            <div class="stage" id="stage2">
                <div class="tools-selection">
                    <div class="tool-card" onclick="selectTool('deepfake')">
                        <div class="tool-icon-large">
                            <svg
                                fill="#000000"
                                width="800px"
                                height="800px"
                                viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M7.5,3 C7.77614237,3 8,3.22385763 8,3.5 C8,3.77614237 7.77614237,4 7.5,4 L5.5,4 C4.67157288,4 4,4.67157288 4,5.5 L4,7.53112887 C4,7.80727125 3.77614237,8.03112887 3.5,8.03112887 C3.22385763,8.03112887 3,7.80727125 3,7.53112887 L3,5.5 C3,4.11928813 4.11928813,3 5.5,3 L7.5,3 Z M16.5,4 C16.2238576,4 16,3.77614237 16,3.5 C16,3.22385763 16.2238576,3 16.5,3 L18.5,3 C19.8807119,3 21,4.11928813 21,5.5 L21,7.5 C21,7.77614237 20.7761424,8 20.5,8 C20.2238576,8 20,7.77614237 20,7.5 L20,5.5 C20,4.67157288 19.3284271,4 18.5,4 L16.5,4 Z M20,16.5 C20,16.2238576 20.2238576,16 20.5,16 C20.7761424,16 21,16.2238576 21,16.5 L21,18.5 C21,19.8807119 19.8807119,21 18.5,21 L16.5,21 C16.2238576,21 16,20.7761424 16,20.5 C16,20.2238576 16.2238576,20 16.5,20 L18.5,20 C19.3284271,20 20,19.3284271 20,18.5 L20,16.5 Z M3,16.5 C3,16.2238576 3.22385763,16 3.5,16 C3.77614237,16 4,16.2238576 4,16.5 L4,18.5 C4,19.3284271 4.67157288,20 5.5,20 L7.5,20 C7.77614237,20 8,20.2238576 8,20.5 C8,20.7761424 7.77614237,21 7.5,21 L5.5,21 C4.11928813,21 3,19.8807119 3,18.5 L3,16.5 Z M8,8.5 C8,8.22385763 8.22385763,8 8.5,8 C8.77614237,8 9,8.22385763 9,8.5 L9,9.5 C9,9.77614237 8.77614237,10 8.5,10 C8.22385763,10 8,9.77614237 8,9.5 L8,8.5 Z M16,8.5 C16,8.22385763 16.2238576,8 16.5,8 C16.7761424,8 17,8.22385763 17,8.5 L17,9.5 C17,9.77614237 16.7761424,10 16.5,10 C16.2238576,10 16,9.77614237 16,9.5 L16,8.5 Z M12,8.5 C12,8.22385763 12.2238576,8 12.5,8 C12.7761424,8 13,8.22385763 13,8.5 L13,12.5 C13,13.3284271 12.3284271,14 11.5,14 C11.2238576,14 11,13.7761424 11,13.5 C11,13.2238576 11.2238576,13 11.5,13 C11.7761424,13 12,12.7761424 12,12.5 L12,8.5 Z M8.1,15.8 C7.93431458,15.5790861 7.9790861,15.2656854 8.2,15.1 C8.4209139,14.9343146 8.73431458,14.9790861 8.9,15.2 C9.81096778,16.4146237 10.8353763,17 12,17 C13.1646237,17 14.1890322,16.4146237 15.1,15.2 C15.2656854,14.9790861 15.5790861,14.9343146 15.8,15.1 C16.0209139,15.2656854 16.0656854,15.5790861 15.9,15.8 C14.8109678,17.252043 13.502043,18 12,18 C10.497957,18 9.18903222,17.252043 8.1,15.8 Z"
                                />
                            </svg>
                        </div>
                        <h3 class="tool-title">DeepFake</h3>
                        <p class="tool-description">
                            Органическая замена лиц с помощью нейросетей нового
                            поколения
                        </p>
                    </div>

                    <div class="tool-card" onclick="selectTool('neural')">
                        <div class="tool-icon-large">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
                                />
                            </svg>
                        </div>
                        <h3 class="tool-title">Neural Editor</h3>
                        <p class="tool-description">
                            Био-морфная обработка изображений с AI-усилением
                        </p>
                    </div>
                </div>
            </div>

            <!-- Этап 3: Настройки -->
            <div class="stage" id="stage3">
                <!-- DeepFake настройки -->
                <div id="deepfakeSettings" style="display: none">
                    <div class="bio-glow">
                        <div class="synthesis-particles">
                            <div
                                class="bio-particle"
                                style="animation-delay: 0s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 2s"
                            ></div>
                        </div>
                    </div>
                    <div class="settings-buttons">
                        <button
                            class="setting-button"
                            onclick="handleDeepfakeOption('upload')"
                        >
                            Загрузить свой файл
                        </button>
                        <button
                            class="setting-button"
                            onclick="handleDeepfakeOption('collection')"
                        >
                            Выбрать из коллекции
                        </button>
                    </div>
                    <div
                        id="deepfakeTransition"
                        class="transition-indicator"
                        style="display: none"
                    >
                        <p>Подготовка к синтезу...</p>
                        <div class="countdown-circle"></div>
                    </div>
                </div>

                <!-- Neural Editor настройки -->
                <div id="neuralSettings" style="display: none">
                    <div class="text-input-container">
                        <textarea
                            class="bio-input"
                            id="promptInput"
                            placeholder="Опишите желаемые изменения..."
                        ></textarea>
                        <div class="prompt-suggestions">
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Сделать фон космическим')"
                            >
                                🌌 Космос
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Добавить неоновое свечение')"
                            >
                                ✨ Неон
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Стиль киберпанк')"
                            >
                                🤖 Киберпанк
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Превратить в аниме')"
                            >
                                🎨 Аниме
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Добавить дождь')"
                            >
                                🌧️ Дождь
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Сделать винтажным')"
                            >
                                📷 Винтаж
                            </div>
                        </div>
                    </div>
                    <div
                        id="neuralTransition"
                        class="transition-indicator"
                        style="display: none"
                    >
                        <p>Анализ запроса...</p>
                        <div class="countdown-circle"></div>
                    </div>
                </div>
            </div>

            <!-- Этап 4: Синтез -->
            <div class="stage" id="stage4">
                <div class="synthesis-container">
                    <div class="synthesis-reactor">
                        <div class="reactor-core"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-particles">
                            <div
                                class="bio-particle"
                                style="animation-delay: 0s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 0.5s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1.5s"
                            ></div>
                        </div>
                    </div>
                    <div class="synthesis-text">Био-синтез в процессе...</div>
                </div>
            </div>

            <!-- Этап 5: Результат -->
            <div class="stage" id="stage5">
                <div class="result-container">
                    <div class="image-comparer">
                        <div class="comparer-container" id="comparerContainer">
                            <div class="comparer-image before">
                                <span>Оригинал</span>
                            </div>
                            <div class="comparer-image after">
                                <span>Результат</span>
                            </div>
                            <div
                                class="comparer-slider"
                                id="comparerSlider"
                            ></div>
                            <div class="comparer-labels">
                                <span class="comparer-label">До</span>
                                <span class="comparer-label">После</span>
                            </div>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button
                            class="result-button"
                            onclick="downloadResult()"
                        >
                            Скачать
                        </button>
                        <button class="result-button" onclick="shareResult()">
                            Поделиться
                        </button>
                        <button class="result-button" onclick="goToStage(1)">
                            Начать заново
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script src="js/script.js"></script>
    </body>
</html>
