<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>F4TA Morgana AI Lab</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <!-- Нейронная сеть на фоне -->
        <div class="neural-network">
            <div class="neuron"></div>
            <div class="neuron"></div>
            <div class="neuron"></div>
            <div class="neuron"></div>
            <div class="neuron"></div>
        </div>

        <!-- Органические частицы -->
        <div class="organic-particles">
            <div class="particle" style="left: 10%; animation-delay: 0s"></div>
            <div class="particle" style="left: 30%; animation-delay: 1s"></div>
            <div class="particle" style="left: 50%; animation-delay: 2s"></div>
            <div class="particle" style="left: 70%; animation-delay: 3s"></div>
            <div class="particle" style="left: 90%; animation-delay: 4s"></div>
        </div>

        <!-- Прогресс-бар этапов -->
        <div class="progress-bar" id="progressBar">
            <div class="step-indicator">
                <div class="step-circle active" data-step="1">1</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="2">2</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="3">3</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="4">4</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="5">5</div>
            </div>
        </div>

        <div class="container">
            <!-- Этап 1: Загрузка -->
            <div class="stage active" id="stage1">
                <div class="hero">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="220"
                        height="220"
                        viewBox="0 0 200 200"
                        role="img"
                        aria-label="Neural network logo with neutron core"
                    >
                        <defs>
                            <!-- Анимированный градиент -->
                            <linearGradient
                                id="linkGrad"
                                x1="0"
                                x2="1"
                                y1="0"
                                y2="1"
                            >
                                <stop offset="0%" stop-color="#00dc82">
                                    <animate
                                        attributeName="stop-color"
                                        values="#00dc82;#9d4edd;#00f5ff;#00dc82"
                                        dur="6s"
                                        repeatCount="indefinite"
                                    />
                                </stop>
                                <stop offset="50%" stop-color="#9d4edd">
                                    <animate
                                        attributeName="stop-color"
                                        values="#9d4edd;#00f5ff;#00dc82;#9d4edd"
                                        dur="6s"
                                        repeatCount="indefinite"
                                    />
                                </stop>
                                <stop offset="100%" stop-color="#00f5ff">
                                    <animate
                                        attributeName="stop-color"
                                        values="#00f5ff;#00dc82;#9d4edd;#00f5ff"
                                        dur="6s"
                                        repeatCount="indefinite"
                                    />
                                </stop>
                            </linearGradient>

                            <!-- Эффект свечения -->
                            <filter
                                id="glow"
                                x="-50%"
                                y="-50%"
                                width="200%"
                                height="200%"
                            >
                                <feGaussianBlur
                                    in="SourceGraphic"
                                    stdDeviation="3"
                                    result="blur"
                                />
                                <feMerge>
                                    <feMergeNode in="blur" />
                                    <feMergeNode in="SourceGraphic" />
                                </feMerge>
                            </filter>

                            <!-- Градиент ядра -->
                            <radialGradient
                                id="coreGrad"
                                cx="50%"
                                cy="50%"
                                r="50%"
                            >
                                <stop offset="0%" stop-color="#ffffff" />
                                <stop offset="50%" stop-color="#9d4edd" />
                                <stop
                                    offset="100%"
                                    stop-color="#00f5ff"
                                    stop-opacity="0.7"
                                />
                            </radialGradient>

                            <style>
                                .node {
                                    filter: url(#glow);
                                }
                                .link {
                                    stroke: url(#linkGrad);
                                    stroke-width: 2.5;
                                    opacity: 0.8;
                                }
                                .orbit {
                                    fill: none;
                                    stroke: #00f5ff;
                                    stroke-opacity: 0.4;
                                    stroke-width: 1;
                                }
                                .particle {
                                    fill: #00dc82;
                                    filter: url(#glow);
                                }
                            </style>
                        </defs>

                        <!-- Линии-связи -->
                        <line x1="100" y1="100" x2="40" y2="40" class="link">
                            <animate
                                attributeName="x2"
                                values="40;30;40"
                                dur="5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="40;30;40"
                                dur="5s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <line x1="100" y1="100" x2="150" y2="50" class="link">
                            <animate
                                attributeName="x2"
                                values="150;170;150"
                                dur="6s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="50;30;50"
                                dur="6s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <line x1="100" y1="100" x2="160" y2="120" class="link">
                            <animate
                                attributeName="x2"
                                values="160;180;160"
                                dur="4s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="120;140;120"
                                dur="4s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <line x1="100" y1="100" x2="60" y2="160" class="link">
                            <animate
                                attributeName="x2"
                                values="60;40;60"
                                dur="5.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="160;180;160"
                                dur="5.5s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <line x1="100" y1="100" x2="140" y2="170" class="link">
                            <animate
                                attributeName="x2"
                                values="140;160;140"
                                dur="6.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="170;190;170"
                                dur="6.5s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <line x1="100" y1="100" x2="40" y2="120" class="link">
                            <animate
                                attributeName="x2"
                                values="40;20;40"
                                dur="4.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="y2"
                                values="120;140;120"
                                dur="4.5s"
                                repeatCount="indefinite"
                            />
                        </line>

                        <!-- Центральное ядро (заменено на "нейтрон") -->
                        <circle
                            cx="100"
                            cy="100"
                            r="18"
                            fill="url(#coreGrad)"
                            filter="url(#glow)"
                        >
                            <animate
                                attributeName="r"
                                values="18;22;18"
                                dur="3s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <!-- Орбиты -->
                        <circle cx="100" cy="100" r="30" class="orbit" />
                        <circle cx="100" cy="100" r="45" class="orbit" />

                        <!-- Частицы на орбитах -->
                        <circle r="4" class="particle">
                            <animateMotion
                                dur="6s"
                                repeatCount="indefinite"
                                path="M100,100 m-30,0 a30,30 0 1,1 60,0 a30,30 0 1,1 -60,0"
                            />
                        </circle>

                        <circle r="3" fill="#ffffff" class="particle">
                            <animateMotion
                                dur="8s"
                                repeatCount="indefinite"
                                path="M100,100 m-45,0 a45,45 0 1,1 90,0 a45,45 0 1,1 -90,0"
                            />
                        </circle>

                        <!-- Узлы вокруг -->
                        <circle
                            cx="40"
                            cy="40"
                            r="6"
                            fill="#00dc82"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="40;30;40"
                                dur="5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="40;30;40"
                                dur="5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="6;10;6"
                                dur="5s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <circle
                            cx="150"
                            cy="50"
                            r="7"
                            fill="#00f5ff"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="150;170;150"
                                dur="6s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="50;30;50"
                                dur="6s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="7;11;7"
                                dur="6s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <circle
                            cx="160"
                            cy="120"
                            r="6"
                            fill="#9d4edd"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="160;180;160"
                                dur="4s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="120;140;120"
                                dur="4s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="6;9;6"
                                dur="4s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <circle
                            cx="60"
                            cy="160"
                            r="7"
                            fill="#00dc82"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="60;40;60"
                                dur="5.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="160;180;160"
                                dur="5.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="7;12;7"
                                dur="5.5s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <circle
                            cx="140"
                            cy="170"
                            r="5"
                            fill="#00f5ff"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="140;160;140"
                                dur="6.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="170;190;170"
                                dur="6.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="5;9;5"
                                dur="6.5s"
                                repeatCount="indefinite"
                            />
                        </circle>

                        <circle
                            cx="40"
                            cy="120"
                            r="5"
                            fill="#9d4edd"
                            class="node"
                        >
                            <animate
                                attributeName="cx"
                                values="40;20;40"
                                dur="4.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="cy"
                                values="120;140;120"
                                dur="4.5s"
                                repeatCount="indefinite"
                            />
                            <animate
                                attributeName="r"
                                values="5;8;5"
                                dur="4.5s"
                                repeatCount="indefinite"
                            />
                        </circle>
                    </svg>

                    <h1 data-text="F4TA-Morgana AI Lab">F4TA-Morgana AI Lab</h1>
                    <p class="subtitle">
                        Laboratorium experimentorum neuralium
                    </p>

                    <div class="upload-zone">
                        <input
                            type="file"
                            id="fileInput"
                            style="display: none"
                            accept="image/*"
                        />
                        <button
                            class="upload-button"
                            onclick="document.getElementById('fileInput').click()"
                        >
                            Загрузить файл
                        </button>
                    </div>
                </div>
            </div>

            <!-- Этап 2: Выбор инструмента -->
            <div class="stage" id="stage2">
                <div class="tools-selection">
                    <div class="tool-card" onclick="selectTool('deepfake')">
                        <div class="tool-icon-large">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"
                                />
                            </svg>
                        </div>
                        <h3 class="tool-title">DeepFake</h3>
                        <p class="tool-description">
                            Органическая замена лиц с помощью нейросетей нового
                            поколения
                        </p>
                    </div>

                    <div class="tool-card" onclick="selectTool('neural')">
                        <div class="tool-icon-large">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
                                />
                            </svg>
                        </div>
                        <h3 class="tool-title">Neural Editor</h3>
                        <p class="tool-description">
                            Био-морфная обработка изображений с AI-усилением
                        </p>
                    </div>
                </div>
            </div>

            <!-- Этап 3: Настройки -->
            <div class="stage" id="stage3">
                <!-- DeepFake настройки -->
                <div id="deepfakeSettings" style="display: none">
                    <div class="bio-glow">
                        <div class="synthesis-particles">
                            <div
                                class="bio-particle"
                                style="animation-delay: 0s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 2s"
                            ></div>
                        </div>
                    </div>
                    <div class="settings-buttons">
                        <button
                            class="setting-button"
                            onclick="handleDeepfakeOption('upload')"
                        >
                            Загрузить свой файл
                        </button>
                        <button
                            class="setting-button"
                            onclick="handleDeepfakeOption('collection')"
                        >
                            Выбрать из коллекции
                        </button>
                    </div>
                    <div
                        id="deepfakeTransition"
                        class="transition-indicator"
                        style="display: none"
                    >
                        <p>Подготовка к синтезу...</p>
                        <div class="countdown-circle"></div>
                    </div>
                </div>

                <!-- Neural Editor настройки -->
                <div id="neuralSettings" style="display: none">
                    <div class="text-input-container">
                        <textarea
                            class="bio-input"
                            id="promptInput"
                            placeholder="Опишите желаемые изменения..."
                        ></textarea>
                        <div class="prompt-suggestions">
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Сделать фон космическим')"
                            >
                                🌌 Космос
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Добавить неоновое свечение')"
                            >
                                ✨ Неон
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Стиль киберпанк')"
                            >
                                🤖 Киберпанк
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Превратить в аниме')"
                            >
                                🎨 Аниме
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Добавить дождь')"
                            >
                                🌧️ Дождь
                            </div>
                            <div
                                class="prompt-chip"
                                onclick="addPrompt('Сделать винтажным')"
                            >
                                📷 Винтаж
                            </div>
                        </div>
                    </div>
                    <div
                        id="neuralTransition"
                        class="transition-indicator"
                        style="display: none"
                    >
                        <p>Анализ запроса...</p>
                        <div class="countdown-circle"></div>
                    </div>
                </div>
            </div>

            <!-- Этап 4: Синтез -->
            <div class="stage" id="stage4">
                <div class="synthesis-container">
                    <div class="synthesis-reactor">
                        <div class="reactor-core"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-ring"></div>
                        <div class="synthesis-particles">
                            <div
                                class="bio-particle"
                                style="animation-delay: 0s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 0.5s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1s"
                            ></div>
                            <div
                                class="bio-particle"
                                style="animation-delay: 1.5s"
                            ></div>
                        </div>
                    </div>
                    <div class="synthesis-text">Био-синтез в процессе...</div>
                </div>
            </div>

            <!-- Этап 5: Результат -->
            <div class="stage" id="stage5">
                <div class="result-container">
                    <div class="image-comparer">
                        <div class="comparer-container" id="comparerContainer">
                            <div class="comparer-image before">
                                <span>Оригинал</span>
                            </div>
                            <div class="comparer-image after">
                                <span>Результат</span>
                            </div>
                            <div
                                class="comparer-slider"
                                id="comparerSlider"
                            ></div>
                            <div class="comparer-labels">
                                <span class="comparer-label">До</span>
                                <span class="comparer-label">После</span>
                            </div>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button
                            class="result-button"
                            onclick="downloadResult()"
                        >
                            Скачать
                        </button>
                        <button class="result-button" onclick="shareResult()">
                            Поделиться
                        </button>
                        <button class="result-button" onclick="goToStage(1)">
                            Начать заново
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script src="script.js"></script>
    </body>
</html>
